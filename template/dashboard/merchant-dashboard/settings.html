{% extends 'dashboard/elements/layouts/admin.html' %}
{% load static widget_tweaks%}

{% block additional_css %}
<style>
    .modal-header {
        display: flex;
        flex-shrink: 0;
        align-items: center;
        justify-content: space-between;
        padding: 0.8rem;
        border-bottom: 1px solid #d8dbe0;
        border-bottom: 1px solid var(--cui-modal-header-border-color, #d8dbe0);
        border-top-left-radius: calc(0.3rem - 1px);
        border-top-right-radius: calc(0.3rem - 1px);
    }


    .form-control {
        border: 2px solid gray;

    }

    .form-control:focus {
        border: 2px solid skyblue;
    }

    .popup {
        display: none;
        position: fixed;
        z-index: 3;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }

    .popup-content2 {
        color: black;
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 690px;
    }
   

    

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }

.password-toggle-icon {
  position: absolute;
  margin-right: 673px;
  margin-top: -13px;;
  right: 10px;
  transform: translateY(-50%);
  cursor: pointer;
}

.password-toggle-icon i {
  font-size: 18px;
  line-height: 1;
  color: #333;
  transition: color 0.3s ease-in-out;
  margin-bottom: 20px;
}

.password-toggle-icon i:hover {
  color: #000;
}
</style>


{% endblock %}

{% block content %}


<div class="row">
    <div class="col-xl-12 col-xxl-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">API Details</h4>
            </div>
            <form method="post">
                {% csrf_token %}

                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6 mb-2">
                            <div class="mb-3 user-box">
                                <label class="text-label form-label text-black">API Key</label>
                                <input type="password" name="Api_key" class="form-control" id="id_password1" >
                                <span class="password-toggle-icon">
                                    <i class="fas fa-eye" id="togglePassword1" ></i>
                                </span>
                            </div>
                        </div>

                        <div class="col-lg-6 mb-2">
                            <div class="mb-2 " style="margin-top: 10px;
                                                    margin-left: 30px;">
                                <a class=" btn btn-primary" style="margin-top: 20px;"
                                    onclick="togglePopup('popupFormAPI')">Change</a>
                            </div>
                        </div>

                        <div class="col-lg-6 mb-2">
                            <div class="mb-3">
                                <label class="text-label form-label text-black">Hash Key</label>
                                <input type="password" name="Hash_key" class="form-control" >
                                <span class="password-toggle-icon">
                                    <i class="fas fa-eye" ></i>
                                </span>
                            </div>
                        </div>

                        <div class="col-lg-6 mb-2">
                            <div class="mb-2 " style="margin-top: 10px;
                                                    margin-left: 30px;">
                                <!-- <span class="togglePassword"><i class="fas fa-eye"></i></span> -->
                                <a class=" btn btn-primary" style="margin-top: 20px;"
                                    onclick="togglePopup('popupFormHash')">Change</a>
                            </div>
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="mb-3">
                                <label class="text-label form-label text-black">MPin</label>
                                <input type="password" name="M_Pin" class="form-control" id="m_pin">
                                <span class="password-toggle-icon">
                                    <i class="fas fa-eye" ></i>
                                </span>
                            </div>
                        </div>

                        <div class="col-lg-6 mb-2">
                            <div class="mb-2 " style="margin-top: 10px;
                                                    margin-left: 30px;">
                                <!-- <span class="togglePassword"><i class="fas fa-eye"></i></span> -->
                                <a class=" btn btn-primary" style="margin-top: 20px;"
                                    onclick="togglePopup('popupFormMPin')">Change</a>
                            </div>
                        </div>


                        <!-- <div class="mb-3">
                        <button class=" btn btn-outline-primary" onclick="togglePopups('popupFormIP')">Check Your
                            IP</button>
                        <button class=" btn btn-outline-primary" onclick="togglePopups('popupFormPassword')"
                            style="margin-left: 10px;">Reset Password</button>
                    </div> -->

                        <!-- <div class="card-body" style="text-align: center">
            <button type="submit" class="btn btn-primary btn-lg">Save</button>
        </div> -->
            </form>
        </div>
    </div>
</div>


<!-- <div id="popupFormAPI" class="popup">
    <form class="popup-content2" style="border-radius:25px ;" action="#">
        <span class="close" onclick="closebtn('popupFormAPI')">&times;</span>
        <div class="mb-3 ip_block">
            <label><strong>API Token Settings</strong></label>
            <hr>
            <div style="display: flex;   justify-content: space-between; align-items: first baseline; 
                            margin-bottom: 40px;">
                <div>
                   
                    <h5 style="text-align: center;">Change API Token</h5>
                </div>
               
            </div>

        </div>
        <hr style="  margin-top: 30px;">
    </form>
</div> -->



<div id="popupFormAPI" class="popup">
    <form class="popup-content2" style="border-radius: 25px;" action="#">
        <span class="close" onclick="closebtn('popupFormAPI')">&times;</span>
        <div class="modal-header">
            <h4 class="modal-title"><strong>API TOKEN Settings</strong></h4>
        </div>
        <div class="modal-body">
            <div class="text-center">
                <a class="btn btn-outline-primary m-1" onclick="togglePopup('popupChangeAPI')">
                    <img class="me-2 mb-1"
                        src="{% static 'dashboard/icons/lock-xxxx.png' %}" width="18" height="18" >Generate API
                    Token</a>
            </div>
        </div>
    </form>
</div>

<div id="popupChangeAPI" class="popup">
    <form class="popup-content2" style="border-radius: 25px;" action="#">
        <span class="close" onclick="closebtn('popupChangeAPI')">&times;</span>
        <div class="modal-header">
            <h4 class="modal-title"><strong>API TOKEN Settings</strong></h4>
        </div>
        <div class="modal-body" style="margin-left: -20px;">
            <div>
                <label>MPin must be 4 digits long</label>
            </div>
            <label style="width: -moz-available; margin-top: 18px;"><strong>MPin</strong></label>
            <input type="text" name="Mpin" class="form-control" placeholder="Enter your MPin"
                required>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline-primary "  type="submit" form="MyForm">Generate</button>
        </div>
        
    </form>
</div>


<div id="popupFormHash" class="popup">
    <form class="popup-content2" style="border-radius: 25px;" action="#">
        <span class="close" onclick="closebtn('popupFormHash')">&times;</span>
        <div class="modal-header">
            <h4 class="modal-title"><strong>Hash Key Settings</strong></h4>
        </div>
        <div class="modal-body">
            <div class="text-center">
                <button class="btn btn-outline-primary m-1" onclick="togglePopup('popupChangeHash')"> 
                    <img class="me-2 mb-1"
                        src="{% static 'dashboard/icons/lock-xxxx.png' %}" width="18" height="18">Generate Hash
                    Key</button>
            </div>
        </div>
    </form>
</div>

<div id="popupChangeHash" class="popup">
    <form class="popup-content2" style="border-radius: 25px;" action="#">
        <span class="close" onclick="closebtn('popupChangeHash')">&times;</span>
        <div class="modal-header">
            <h4 class="modal-title"><strong>Hash Key Settings</strong></h4>
        </div>
        <div class="modal-body" style="margin-left: -20px;">
            <div>
                <label>MPin must be 4 digits long</label>
            </div>
            <label style="width: -moz-available; margin-top: 18px;"><strong>MPin</strong></label>
            <input type="text" name="Mpin" class="form-control" placeholder="Enter your MPin"
                required>
        </div>
        <div class="modal-footer">
            <a class="btn btn-outline-primary" form="MyForm">Generate</a>
        </div>
        
    </form>
</div>

<div id="popupFormMPin" class="popup">
    <form class="popup-content2" style="border-radius: 25px;" action="#">
        <span class="close" onclick="closebtn('popupFormMPin')">&times;</span>
        <div class="modal-header">
            <h4 class="modal-title"><strong>Change MPin</strong></h4>
        </div>
        <div class="modal-body" style="margin-left: -20px;">
            <div>
                <label>MPin must be 4 digits long</label>
            </div>
            <label style="width: -moz-available; margin-top: 18px;">Old Pin</label>
            <input type="text" name="business_name" class="form-control" placeholder="Enter your Current Password"
                required>
            <label style="width: -moz-available; margin-top: 18px;">New Pin</label>
            <input type="text" name="business_name" class="form-control" placeholder="Enter your New Password" required>
            <label style="width: -moz-available; margin-top: 18px;">Confirm Pin</label>
            <input type="text" name="business_name" class="form-control" placeholder="Retype your New Password"
                required>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline-primary " type="submit" form="MyForm">Save Request</button>
        </div>
    </form>
</div>



{% endblock %}


{% block additional_js %}
<script>
    $(document).ready(function () {
        // SmartWizard initialize
        $('#smartwizard').smartWizard();
    });
</script>

<script>
   const togglePassword = document.querySelector('#togglePassword1');
  const password = document.querySelector('#id_password1');

  togglePassword.addEventListener('click', function (e) {
    // toggle the type attribute
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);
    // toggle the eye slash icon
    this.classList.toggle('fa-eye-slash');
});

</script>





<script>
    function togglePopup(x) {
        console.log(x)
        a = document.querySelector('#' + x)
        console.log(a)
        a.style.display = "block";
    }

    function closebtn(popup) {
        y = document.getElementById(popup);
        console.log(y)
        // When the user clicks on <span> (x), close the popup
        y.style.display = "none";
    }

</script>

<script>
    function save_click() {
        var list = document.querySelectorAll('.form-ip')
        console.log(list)
        for (i = 0; i < list.length; i++) {
            console.log(list[i].value)
        }
    }
    document.querySelector(".sweet-auto").onclick = function () {
        swal({
            title: "Saved Successfully !!",
            timer: 1e3,
            showConfirmButton: !1
        })
    }

</script>
{% endblock %}